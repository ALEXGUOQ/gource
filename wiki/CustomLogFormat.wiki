#summary using Gource to visualize other data sources via the custom log format option.

== Custom Log Format ==

=== Overview ===

If you want to use Gource to visualize something other than the supported log formats, there is a pipe ('|') delimited custom log format option:

  * *timestamp* - A [http://en.wikipedia.org/wiki/Unix_time unix timestamp] of when the update occured.
  * *username*  - The name of the user who made the update.
  * *type*      - initial for the update type - (*A*)dded, (*M*)odified or (*D*)eleted.
  * *file*      - Path of the file updated.
  * *colour*    - A colour for the file in hex (FFFFFF) format. _Optional_.

This format is detected by Gource, so you don't need any extra command line options to use it:

{{{
gource custom.log
}}}

=== Custom Log Example ===

The user _andrew_ adding the file _src/main.cpp_:

{{{
1275543595|andrew|A|src/main.cpp
}}}

Adding the same file coloured red (FF0000):

{{{
1275543595|andrew|A|src/main.cpp|FF0000
}}}

=== Streaming Custom Log Format via STDIN ===

If you want to stream live data into Gource, a good way to do this is to make a script that feeds custom log format entries into Gource via STDIN:

{{{
my-custom-log-script.pl | gource --realtime --log-format custom -
}}}

Assuming 'my-custom-log-script.pl' periodically prints custom log format lines to STDOUT. The '-' at the end of the Gource command tells it to expect data on STDIN.

--realtime tells Gource to increment the clock in real time.

*NOTE:* This examples assumes Gource 0.27 or later (STDIN support was buggy in earlier versions).

== Custom Log Scripts ==

=== DokuWiki ===

_WolverineX02_ has created a script to display [http://www.dokuwiki.org DokuWiki] change history with Gource which you can get here:

http://www.dokuwiki.org/tips:gource_analysis

=== Perforce ===

Olaf contributes this one shell one liner to convert Perforce logs to Gource custom log format:

{{{
p4 changes ...|awk '{print $2}'|p4 -x - describe -s|awk '(/^Change / || /^... /) {if ($1 == "Change") {u=substr($4,1,index($4,"@")-1); t = $(NF-1) " " $NF; gsub("/"," ",t); gsub(":"," ",t);time=mktime(t);} else {if ($NF=="add") {c="A";} else if ($NF=="delete") {c="D";} else {c="M";};f=substr($2,3,index($2,"#")-3);print time "|" u "|" c "|" f;}}'|sort -n
}}}